# Base configuration for hybrid denoising experiments

defaults:
  - models/hybrid/hybrid_with_transformer@model
  - data: sbm_default
  - base/trainer/default@trainer
  - base/logger/default@logger
  - base/callbacks/default
  - _self_

# Experiment identification
experiment_name: "hybrid_denoising"
seed: 42
sanity_check: false

# Override model parameters with data config values
model:
  noise_type: ${data.noise_type}
  noise_levels: ${data.noise_levels}
  seed: ${seed}

# Logging configuration
wandb:
  project: "tmgg-hybrid-denoising"
  name: "hybrid_gnn${model.gnn_num_layers}L_trans${model.transformer_num_layers}L_${model.transformer_num_heads}H"
  tags: ["hybrid", "gnn", "transformer", "denoising", "sbm"]

# Visualization settings (step-based)
visualization_interval: 5000  # steps between logging visualizations

# Evaluation settings
evaluation:
  visualization_interval: ${visualization_interval}

# Paths configuration
# - Local execution: Hydra resolves ${hydra:runtime.output_dir} automatically
# - Remote execution (Modal/Ray): prepare_config_for_remote() sets these to None,
#   then execute_task() resolves from TMGG_OUTPUT_BASE env var and run_id
paths:
  output_dir: ${hydra:runtime.output_dir}
  results_dir: ${paths.output_dir}/results

# Hydra output directory (version-based for checkpoint resumption)
hydra:
  run:
    dir: outputs/v${tmgg_version:}/${experiment_name}
  sweep:
    dir: outputs/sweeps/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num}